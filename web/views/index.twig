{% extends "layout.html" %}

{% block content %}
<div class="jumbotron text-center">
  <div class="container">
    <a href="/">
      <h1>OtherOverlays</h1>
    </a>
    <p>Some missing overlays that Facebook hasn't (yet) neatly facilitated... easy to create and download.</p>
  </div>
</div>
<div id="main-content" class="container"></div>

<script type="text/babel">
  $(function(){

    ReactDOM.render(
      <h1>Hello, world!</h1>,
      document.getElementById('main-content')
    );

    var FbUrlForm = React.createClass({
      render: function(){
        return (
          <form id="FbUrlForm">
            <input type="text" name="fbUrl" value={this.state.fbUrl} NOTE="having trouble with the onchange... not accepting 'fnName', 'fnName()', fnName, fnName() .. but it does want an onchange" />
            <input type="submit" />
          </form>
        );
      },

      handleSubmit: function(e){
        var ogProfileUrl = fbProfileUrl.replace("www.facebook.com", "graph.facebook.com")
        $.ajax({
          url: ogProfileUrl,
          dataType: 'json',
          cache: false,
          success: function(fbUser){
            this.setState({
              fbId: fbUser.id,
              imgUrl: '/silexImages/fbImages/'+fbUser.id+'.jpg'
            });
          }.bind(this)
        });
      }
    });

    var FbProfilePicImg = React.createClass({
      render: function(){
        return (
          <div id="FbProfilePicImg">
            <label>Original Profile Picture:</label>
            <img src={this.state.imgUrl} height="300" width="300" />
          </div>
        );
      }
    });

    var debugInitialState = {
      fbUrl: "http://facebook.com/danieljsj",
      fbId: "1146150058",
      imgUrl: "https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png"
    };

    var prodInitialState = { 
      fbUrl: "",
      fbId: "", 
      imgUrl: ""
    };


    var FbProfilePicBox = React.createClass({

      componentDidMount: function(){ this.state = debugInitialState; },
      
      getInitialState: function(){

        return debugInitialState;
      },

      render: function(){
        return (
          <div id="FbProfilePicBox">
            <h1>Facebook</h1>

            <FbUrlForm fbUrl={this.state.fbUrl} />

            <FbProfilePicImg imgUrl={this.state.imgUrl} />
          </div>
        );
      }

    });


    ReactDOM.render(
      <FbProfilePicBox />,
      // React.createElement(FbProfilePicBox, null),
      document.getElementById("main-content")
    );


    

  });


</script>

{% endblock %}