<!DOCTYPE html>
<html>
<head>
	<title></title>

	<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
</head>
<body>

<h2>Profile picture:</h2>
<img id="myProfile" class="rebekah" src="/silexImages/fbImages/1146150058.jpg" height="600" width="600">

<h2>Overlay:</h2>
<img id="myFlag" src="lebanon-rect.png"/ height="600" width="600">

<h2>Canvas:</h2>
<canvas id="canvas3" height="600" width="600"></canvas>

<h2 id="export">Export</h2>

<input type="submit" onclick="generateImage();" value="generate" />

<script>
$(function(){

	setTimeout(generateImage, 300);

});

function generateImage(){

		var canvas = document.getElementById("canvas3");
		var ctx = canvas.getContext('2d');
		var img = document.getElementById('myProfile');
		ctx.save();
		ctx.drawImage(img, 0, 0, 600, 600);
		ctx.globalAlpha = 0.4;
		var img = document.getElementById('myFlag');
		ctx.drawImage(img, 0, 0, 600, 600);
		ctx.restore();
		var imgDataUrl = canvas.toDataURL("image/png");
		$("#export").after(
			'<img src="' 
			+ imgDataUrl 
			+ '" width="auto" height="auto"/>'
		);

}
</script>

</body>
</html>

